{% extends "LFGCore/base.html" %}

{% block header %}
<title>Begin Your Search Here!</title>
{% endblock header %}

<style>

  .form-control{

    width: 30%;
  }

</style>

{% block content %}
<h1>Search</h1>
<form action="/search" class="form-group">
  <input type="text" class="form-control" style="width: 30%;"  id="SearchBar" name="query" placeholder="Position Title" value="{{ original_query }}"> <br>
  <input type="submit" value="Search" class="btn btn-primary">
</form>

<table class="table"> 
  <thead>
  <tr>
    <td scope="col">Name</td>
    <td scope="col">Description</td>
    <td scope="col">Roles</td>
  </tr>
</thead>

<tbody>
  {% for project, roles in search_results_project %}
    <tr> 
      <th scope="row"><a href="/project/{{ project.id }}/">{{ project.name }}</a></th>
      <th >{{ project.description }}</th>
      <th>
      <table>
        <tr>
          {% for role, is_applicable in roles %}
            <td>{{ role.title }}</td>
          {% endfor %}
        </tr>
        <tr>
          {% for role, is_applicable in roles %}
          <td>
            {% if is_applicable %}
              <form action="/role/apply/{{ role.id }}/" method="post">
                {% csrf_token %}
                <input type="hidden" name="redirect" value="/search/?query={{ original_query }}">
                <button class="button" type="submit">Apply to this role</button>
              </form>
            {% endif %}
          </td>
          {% endfor %}
        </tr>
      </table>
      </th>
    </tr>
  {% empty %}
    <th>Sorry, no project results were found.</th>
  {% endfor %}

</tbody>
</table>
<table class="table">
  <tr>
    <td scope="col">Username</td>
    <td scope="col">First Name</td>
    <td scope="col">Last Name</td>
  </tr>
  {% for user in search_results_user %}
  <tr>
    <th><a href="/accounts/profile/{{ user.id }}/">{{ user.username }}</a></th>
    <th>{{ user.first_name }}</th>
    <th>{{ user.last_name }}</th>
    <th>
      {% empty %}
    <th>Sorry, no user results were found.</th>
    </th>


  </tr>
</table>

</tr>

{% endfor %}
</table>

{% endblock content %}